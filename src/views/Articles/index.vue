<template>
   <div class="grid grid-rows-[1fr] w-full min-h-screen pb-10 pt-24">
     
      <div class=" gradient__bg backgournd_shadow rounded-xl px-4 sm:px-12 py-6 grid grid-rows-[auto,1fr,auto]">
         <div class="flex flex-row text-white items-center px-4">
            <h3 class="text-3xl ml-2 font-extrabold">مقالات</h3>
            <span>
               <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"  viewBox="0 0 26 26">
                <path d="M16.90625 1.96875C16.863281 1.976563 16.820313 1.988281 16.78125 2L1 2C0.96875 2 0.9375 2 0.90625 2C0.390625 2.046875 -0.00390625 2.480469 0 3L0 18.96875C0 21.332031 1.320313 22.789063 2.5625 23.40625C3.804688 24.023438 5 24 5 24L21 24C21 24 21.085938 24 21.09375 24C21.105469 24 21.113281 24 21.125 24C21.300781 24 22.300781 23.972656 23.4375 23.40625C24.625 22.8125 25.863281 21.449219 25.96875 19.28125C25.96875 19.261719 25.96875 19.238281 25.96875 19.21875C25.96875 19.195313 26 19.179688 26 19.15625C26.003906 19.105469 26.003906 19.050781 26 19C26 18.96875 26 18.9375 26 18.90625L26 8.03125C26 8.019531 26 8.011719 26 8C26 8 25.996094 7.296875 25.625 6.5625C25.289063 5.894531 24.476563 5.164063 23.34375 5.03125C23.234375 4.992188 23.117188 4.96875 23 4.96875L18 4.96875L18 3.1875C18.007813 3.125 18.007813 3.0625 18 3C18.003906 2.957031 18.003906 2.917969 18 2.875C18 2.855469 18 2.832031 18 2.8125C18 2.800781 18 2.792969 18 2.78125C17.992188 2.761719 17.980469 2.738281 17.96875 2.71875C17.96875 2.707031 17.96875 2.699219 17.96875 2.6875C17.960938 2.65625 17.949219 2.625 17.9375 2.59375C17.917969 2.5625 17.898438 2.53125 17.875 2.5C17.847656 2.445313 17.816406 2.394531 17.78125 2.34375C17.75 2.320313 17.71875 2.300781 17.6875 2.28125C17.648438 2.234375 17.609375 2.195313 17.5625 2.15625C17.550781 2.15625 17.542969 2.15625 17.53125 2.15625C17.425781 2.082031 17.3125 2.03125 17.1875 2C17.097656 1.976563 17 1.964844 16.90625 1.96875 Z M 2 4L16 4L16 5.75C15.972656 5.882813 15.972656 6.023438 16 6.15625L16 18.96875C16 20.25 16.40625 21.242188 16.96875 22L5 22C5 22 4.546875 22.003906 4 21.84375C3.816406 21.789063 3.625 21.71875 3.4375 21.625C2.679688 21.25 2 20.679688 2 18.96875 Z M 4 6C3.449219 6 3 6.449219 3 7L3 9C3 9.550781 3.449219 10 4 10L14 10C14.550781 10 15 9.550781 15 9L15 7C15 6.449219 14.550781 6 14 6 Z M 18 6.96875L20.1875 6.96875C20 7.515625 20 7.96875 20 7.96875C20 7.980469 20 7.988281 20 8L20 18C19.996094 18.359375 20.183594 18.695313 20.496094 18.878906C20.808594 19.058594 21.191406 19.058594 21.503906 18.878906C21.816406 18.695313 22.003906 18.359375 22 18L22 8C22.003906 7.972656 22.023438 7.726563 22.15625 7.46875C22.292969 7.199219 22.363281 7 23 7C23.628906 7 23.703125 7.191406 23.84375 7.46875C23.976563 7.734375 23.996094 8.003906 24 8.03125C24 8.03125 24 8.0625 24 8.0625L24 19C24 19.03125 24 19.0625 24 19.09375C23.972656 20.683594 23.308594 21.222656 22.5625 21.59375C21.800781 21.972656 21 22 21 22C21 22 20.199219 21.980469 19.4375 21.59375C18.675781 21.207031 18 20.644531 18 18.96875 Z M 3.71875 12C3.167969 12.078125 2.78125 12.589844 2.859375 13.140625C2.9375 13.691406 3.449219 14.078125 4 14L7 14C7.359375 14.003906 7.695313 13.816406 7.878906 13.503906C8.058594 13.191406 8.058594 12.808594 7.878906 12.496094C7.695313 12.183594 7.359375 11.996094 7 12L4 12C3.96875 12 3.9375 12 3.90625 12C3.875 12 3.84375 12 3.8125 12C3.78125 12 3.75 12 3.71875 12 Z M 9.71875 12C9.167969 12.078125 8.78125 12.589844 8.859375 13.140625C8.9375 13.691406 9.449219 14.078125 10 14L14 14C14.359375 14.003906 14.695313 13.816406 14.878906 13.503906C15.058594 13.191406 15.058594 12.808594 14.878906 12.496094C14.695313 12.183594 14.359375 11.996094 14 12L10 12C9.96875 12 9.9375 12 9.90625 12C9.875 12 9.84375 12 9.8125 12C9.78125 12 9.75 12 9.71875 12 Z M 3.71875 15C3.167969 15.078125 2.78125 15.589844 2.859375 16.140625C2.9375 16.691406 3.449219 17.078125 4 17L7 17C7.359375 17.003906 7.695313 16.816406 7.878906 16.503906C8.058594 16.191406 8.058594 15.808594 7.878906 15.496094C7.695313 15.183594 7.359375 14.996094 7 15L4 15C3.96875 15 3.9375 15 3.90625 15C3.875 15 3.84375 15 3.8125 15C3.78125 15 3.75 15 3.71875 15 Z M 9.71875 15C9.167969 15.078125 8.78125 15.589844 8.859375 16.140625C8.9375 16.691406 9.449219 17.078125 10 17L14 17C14.359375 17.003906 14.695313 16.816406 14.878906 16.503906C15.058594 16.191406 15.058594 15.808594 14.878906 15.496094C14.695313 15.183594 14.359375 14.996094 14 15L10 15C9.96875 15 9.9375 15 9.90625 15C9.875 15 9.84375 15 9.8125 15C9.78125 15 9.75 15 9.71875 15 Z M 4.21875 18C3.667969 18.078125 3.28125 18.589844 3.359375 19.140625C3.4375 19.691406 3.949219 20.078125 4.5 20L7 20C7.359375 20.003906 7.695313 19.816406 7.878906 19.503906C8.058594 19.191406 8.058594 18.808594 7.878906 18.496094C7.695313 18.183594 7.359375 17.996094 7 18L4.5 18C4.46875 18 4.4375 18 4.40625 18C4.375 18 4.34375 18 4.3125 18C4.28125 18 4.25 18 4.21875 18 Z M 9.71875 18C9.167969 18.078125 8.78125 18.589844 8.859375 19.140625C8.9375 19.691406 9.449219 20.078125 10 20L14 20C14.359375 20.003906 14.695313 19.816406 14.878906 19.503906C15.058594 19.191406 15.058594 18.808594 14.878906 18.496094C14.695313 18.183594 14.359375 17.996094 14 18L10 18C9.96875 18 9.9375 18 9.90625 18C9.875 18 9.84375 18 9.8125 18C9.78125 18 9.75 18 9.71875 18Z" fill="#fff"/>
              </svg>
            </span>
         </div>
         <div>
            <div id="loading" v-if="loading" class="grid grid-cols-1 w-full h-full text-white justify-center items-center ">
               <div class="w-full h-full flex items-center justify-center">
                  <svg width="180" height="180" viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg" stroke="#fff">
                     <g fill="none" fill-rule="evenodd" stroke-width="2">
                        <circle cx="22" cy="22" r="1">
                              <animate attributeName="r" begin="0s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"/>
                              <animate attributeName="stroke-opacity" begin="0s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="22" cy="22" r="1">
                              <animate attributeName="r" begin="-0.9s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"/>
                              <animate attributeName="stroke-opacity" begin="-0.9s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"/>
                        </circle>
                     </g>
                  </svg>
               </div>
            </div>
            <div v-else class="p-3 h-full grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-3 items-center">
               <Article 
                  v-for="article in articles"
                  :key="article.id"
                  time="5"
                  rank="مدیر"
                  :img="article.url"
                  userImag="" 
                  userName="میلاد فتاح"
                  description="ماشین های قدیمی"
                  :title="article.title"
               />
               
            </div>
         </div>

         <div class="paginate">
               <Paginate  :currentPage="currentPage" :totalPage="5" @changepaged="changePage"/>
         </div>
      </div>
   </div>
</template>

<script>
import Article from '../../components/Article.vue'
import Paginate from '../../components/Paginate.vue'
import personalApi from '../../api' 
export default {
      components: { Article , Paginate},
      data(){
         return {
            articles : [] ,
            currentPage : 1 , 
            loading : false , 
         }
      },
      methods : {
         getArticles(page = 1){
            this.loading = true ;
            setTimeout(()=>{
               personalApi.get(`photos?_page=${page}&_limit=4` )
               .then(res =>{
                  this.articles = res.data ; 
               })
               .catch(err => console.log(err))
               .finally(()=>this.loading = false );
            } , 1000);
         },
         changePage(page){
            this.getArticles(page);
            this.currentPage = page ;
         }
      },
      created(){
         this.getArticles();
      }
}
</script>

